From 48c968a2923f76ab759327d21b37de86f7a61236 Mon Sep 17 00:00:00 2001
Message-Id: <48c968a2923f76ab759327d21b37de86f7a61236.1554328261.git.liu.denton@gmail.com>
In-Reply-To: <cover.1554328261.git.liu.denton@gmail.com>
References: <cover.1554328261.git.liu.denton@gmail.com>
From: Denton Liu <liu.denton@gmail.com>
Date: Wed, 3 Apr 2019 13:54:27 -0700
Subject: [PATCH 1/2] midx.c: convert FLEX_ALLOC_MEM to FLEX_ALLOC_STR
To: Git Mailing List <git@vger.kernel.org>

Signed-off-by: Denton Liu <liu.denton@gmail.com>
---
 midx.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/midx.c b/midx.c
index 8a505fd423..cb8190329a 100644
--- a/midx.c
+++ b/midx.c
@@ -70,7 +70,7 @@ struct multi_pack_index *load_multi_pack_index(const char *object_dir, int local
 
 	midx_map = xmmap(NULL, midx_size, PROT_READ, MAP_PRIVATE, fd, 0);
 
-	FLEX_ALLOC_MEM(m, object_dir, object_dir, strlen(object_dir));
+	FLEX_ALLOC_STR(m, object_dir, object_dir);
 	m->fd = fd;
 	m->data = midx_map;
 	m->data_len = midx_size;
-- 
2.21.0.834.geaa57a21fa

