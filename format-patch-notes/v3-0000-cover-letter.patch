From df864c4adf4dcab5f959007f87b1c4d0eafecb52 Mon Sep 17 00:00:00 2001
Message-Id: <cover.1557513353.git.liu.denton@gmail.com>
In-Reply-To: <cover.1557327652.git.liu.denton@gmail.com>
References: <cover.1557327652.git.liu.denton@gmail.com>
From: Denton Liu <liu.denton@gmail.com>
Date: Fri, 10 May 2019 14:35:53 -0400
Subject: [PATCH v3 0/2] format-patch: teach format.notes config option
To: Git Mailing List <git@vger.kernel.org>
Cc: Junio C Hamano <gitster@pobox.com>,
    Beat Bolli <dev+git@drbeat.li>

Hi Beat, thanks for catching the style errors. This version fixes those.

Changes since v2:

* Fixed if-else code style
* Fixed typoed errors in 2/2 log message

Changes since v1:

* Made format.notes accept a notes ref instead of a boolean


Denton Liu (2):
  git-format-patch.txt: document --no-notes option
  format-patch: teach format.notes config option

 Documentation/config/format.txt    | 13 ++++++
 Documentation/git-format-patch.txt |  7 ++-
 builtin/log.c                      | 18 +++++++-
 t/t4014-format-patch.sh            | 70 ++++++++++++++++++++++++++++++
 4 files changed, 106 insertions(+), 2 deletions(-)

Range-diff against v2:
1:  4c3535f25b = 1:  4c3535f25b git-format-patch.txt: document --no-notes option
2:  fe674bf63e ! 2:  df864c4adf format-patch: teach format.notes config option
    @@ -8,8 +8,8 @@
         that they may forget to include it and generate a patch series without
         notes.
     
    -    Teach git-format-patch the `format.notes` config option its value is a
    -    notes ref that will be automatically be appended. The special value of
    +    Teach git-format-patch the `format.notes` config option. Its value is a
    +    notes ref that will be automatically appended. The special value of
         "standard" can be used to specify the standard notes. This option is
         overridable with the `--no-notes` option in case a user wishes not to
         append notes.
    @@ -71,9 +71,9 @@
     +		struct strbuf buf = STRBUF_INIT;
     +
     +		rev->show_notes = 1;
    -+		if (!strcmp(value, "standard"))
    ++		if (!strcmp(value, "standard")) {
     +			rev->notes_opt.use_default_notes = 1;
    -+		else {
    ++		} else {
     +			strbuf_addstr(&buf, value);
     +			expand_notes_ref(&buf);
     +			string_list_append(&rev->notes_opt.extra_notes_refs,
-- 
2.21.0.1049.geb646f7864

